<div class="container">
  <div class="row justify-content-center">
    <div class="col-sm-8 my-3">
      <h1>Search all jobs</h1>
        <%= form_with url: jobs_path, method: :get, class: "d-flex" do %>
          <%= text_field_tag :query,
                params[:query],
                class: "form-control",
                placeholder: "Type a keyword"
            %>
          <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
        <% end %>
    </div>
    <div class="cards">
      <% if @jobs.any? %>
        <% @jobs.each do |job| %>
          <div class="card-product">
            <%= cl_image_tag  job.photo.key%> 
              <div class="card-product-infos">
               <h2><%= link_to job.job_title, job_path(job) %> </h2>
                <h4><%= job.company_name %></h4>
                <h5><%= job.location %></h5>
                <h6> Â£<%= job.salary %></h6>
              </div>
              <div class="card-product-infos">
               <% if Favourite.where(job: job, user: current_user).empty? %>
                  <%= button_to job_favourites_path(job), class:"fav_button" do %>
                  <i class="fa-regular fa-heart"></i>
                  <% end %>
                <% else %>
                  <%= link_to favourite_path(Favourite.where(job: job, user: current_user).last), data: {turbo_method: :delete } do %>
                   <i class="fa-solid fa-heart"></i>
                   <% end %>
                <% end %>
              <%= button_to "More details", job_favourites_path(job) %>
              </div>
          </div>
        <% end %>
      <% else %>
          <% if current_user.employer %>
        <em>No jobs listed, add one <%= link_to "here", new_job_path %>.</em>
         <% else %>
        <em>Sorry, no jobs found.</em>
      <% end %>
      <% end %>
    </div>
  </div>
</div>
